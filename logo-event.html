<script type="text/javascript">
    RED.nodes.registerType('logo-event', {
        category: 'home_assistant',
        color: '#fdd835',
        inputs: 0,
        outputs: 1,  // nur ein Ausgang
        icon: 'ha-state.svg',
        label: function() {
            return this.name || "event: state (single)";
        },
        defaults: {
            name: { value:"" },
            server: { value:"", type:"server", required:true },
            version: { value: 0 },
            entityidfilter: { value:"" },
            entityidfiltertype: { value:"exact" },
            outputinitially: { value:false },
            state_type: { value:"str" },
            haltifstate: { value:"" },
            halt_if_type: { value:"str" },
            halt_if_compare: { value:"is" },
            for: { value:0 },
            forUnits: { value:"minutes" },
            outputs: { value:1 }
        }
    });
</script>

<script type="text/x-red" data-template-name="logo-event">
  <div class="form-row">
    <label for="node-input-name">Name</label>
    <input type="text" id="node-input-name">
  </div>
  <div class="form-row">
    <label for="node-input-server"><i class="fa fa-server"></i> Home Assistant</label>
    <input type="text" id="node-input-server">
  </div>
  <div class="form-row">
    <label for="node-input-entityidfilter"><i class="fa fa-tag"></i> Entity ID Filter</label>
    <input type="text" id="node-input-entityidfilter">
  </div>
  <div class="form-row">
    <label for="node-input-entityidfiltertype"><i class="fa fa-filter"></i> Filter Type</label>
    <select id="node-input-entityidfiltertype">
      <option value="exact">Exact</option>
      <option value="substring">Substring</option>
      <option value="regex">Regex</option>
    </select>
  </div>
  <div class="form-row">
    <label for="node-input-outputinitially"><i class="fa fa-power-off"></i> Output initially</label>
    <input type="checkbox" id="node-input-outputinitially">
  </div>
  <div class="form-row">
    <label for="node-input-state_type"><i class="fa fa-code"></i> State Type</label>
    <select id="node-input-state_type">
      <option value="str">String</option>
      <option value="num">Number</option>
      <option value="bool">Boolean</option>
    </select>
  </div>
  <div class="form-row">
    <label for="node-input-haltifstate"><i class="fa fa-ban"></i> If State</label>
    <input type="text" id="node-input-haltifstate">
  </div>
  <div class="form-row">
    <label for="node-input-halt_if_compare">Comparison</label>
    <select id="node-input-halt_if_compare">
      <option value="is">=</option>
      <option value="is_not">â‰ </option>
      <option value="lt">&lt;</option>
      <option value="lte">&lt;=</option>
      <option value="gt">&gt;</option>
      <option value="gte">&gt;=</option>
    </select>
    <select id="node-input-halt_if_type">
      <option value="str">String</option>
      <option value="num">Number</option>
      <option value="bool">Boolean</option>
    </select>
  </div>
  <div class="form-row">
    <label for="node-input-for"><i class="fa fa-clock-o"></i> For</label>
    <input type="number" id="node-input-for" style="width: 100px;">
    <select id="node-input-forUnits">
      <option value="seconds">seconds</option>
      <option value="minutes">minutes</option>
      <option value="hours">hours</option>
    </select>
  </div>
</script>

<script type="text/x-red" data-help-name="logo-event">
  <p>This is a replica of the original Home Assistant <code>events: state</code> node UI with a single output.
  It outputs a single message with <code>msg.payload = true</code> or <code>false</code> based on the condition.</p>
</script>
